 /violations:
    post:
      description: 차량 위반 기록을 생성합니다. 위반 누적 시 자동으로 블랙리스트 등록을 확인합니다.
      operationId: create차량위반기록생성
      parameters:
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCarViolationDto'
      responses:
        '201':
          description: 차량 위반 기록 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarViolationDto'
      security:
        - bearer: []
        - bearer: []
      summary: 차량 위반 기록 생성
      tags:
        - 차량 위반 관리
    get:
      description: |-
        등록된 차량 위반 기록 목록을 페이지네이션과 필터링으로 조회합니다.

        기본 정렬은 생성시간 역순으로 정렬합니다.
      operationId: search차량위반기록목록조회
      parameters:
        - name: page
          required: false
          in: query
          description: '페이지 번호 (기본값: 1)'
          schema:
            minimum: 1
            default: 1
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: '페이지당 항목 수 (기본값: 10)'
          schema:
            minimum: 1
            maximum: 1000
            default: 10
            example: 10
            type: number
        - name: car_number
          required: false
          in: query
          description: 차량번호
          schema:
            type: string
        - name: violation_type
          required: false
          in: query
          description: 위반 유형
          schema:
            example: UNAUTHORIZED_PARKING
            type: string
            enum:
              - UNAUTHORIZED_PARKING
              - OVERTIME_PARKING
              - RESERVED_SPOT_VIOLATION
              - FIRE_LANE_PARKING
              - DISABLED_SPOT_VIOLATION
              - DOUBLE_PARKING
              - BLOCKING_EXIT
              - NO_PERMIT_PARKING
              - EXPIRED_PERMIT
              - SPEEDING
              - NOISE_VIOLATION
              - VANDALISM
              - OTHER
        - name: status
          required: false
          in: query
          description: 위반 상태
          schema:
            example: ACTIVE
            type: string
            enum:
              - ACTIVE
              - DISMISSED
              - APPEALED
              - CANCELLED
        - name: reporter_type
          required: false
          in: query
          description: 신고자 유형
          schema:
            example: SYSTEM
            type: string
            enum:
              - SYSTEM
              - ADMIN
              - RESIDENT
              - SECURITY
        - name: is_processed
          required: false
          in: query
          description: 처리 여부
          schema:
            default: false
            example: true
            type: boolean
        - name: violation_time_from
          required: false
          in: query
          description: 위반 시작 일시
          schema:
            example: '2025-09-15T00:00:00.000Z'
            type: string
        - name: violation_time_to
          required: false
          in: query
          description: 위반 종료 일시
          schema:
            example: '2025-09-15T00:00:00.000Z'
            type: string
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: 차량 위반 기록 목록 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PageDto'
                  - properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CarViolationDto'
      security:
        - bearer: []
        - bearer: []
      summary: 차량 위반 기록 목록 조회
      tags:
        - 차량 위반 관리
  /violations/summary/{carNumber}:
    get:
      description: 특정 차량의 위반 누적 현황과 블랙리스트 위험도를 조회합니다.
      operationId: get차량위반요약정보조회
      parameters:
        - name: carNumber
          required: true
          in: path
          description: 차량번호
          schema:
            type: string
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: 차량 위반 요약 정보 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarViolationSummaryDto'
      security:
        - bearer: []
        - bearer: []
      summary: 차량 위반 요약 정보 조회
      tags:
        - 차량 위반 관리
  /violations/{id}:
    get:
      description: 특정 위반 기록의 상세 정보를 조회합니다.
      operationId: get위반기록상세조회
      parameters:
        - name: id
          required: true
          in: path
          description: 위반 기록 ID
          schema:
            type: number
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      responses:
        '200':
          description: 위반 기록 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarViolationDto'
      security:
        - bearer: []
        - bearer: []
      summary: 위반 기록 상세 조회
      tags:
        - 차량 위반 관리
    put:
      description: 차량 위반 기록의 정보를 수정합니다.
      operationId: update위반기록수정관리자
      parameters:
        - name: id
          required: true
          in: path
          description: 위반 기록 ID
          schema: {}
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCarViolationDto'
      responses:
        '200':
          description: 위반 기록 수정 (관리자 ↑) 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarViolationDto'
      security:
        - bearer: []
        - bearer: []
      summary: 위반 기록 수정 (관리자 ↑)
      tags:
        - 차량 위반 관리
  /violations/{id}/process:
    patch:
      description: 위반 기록의 처리 상태를 변경합니다. (처리완료, 기각, 취소 등)
      operationId: update위반기록처리관리자
      parameters:
        - name: id
          required: true
          in: path
          description: 위반 기록 ID
          schema: {}
        - name: x-parkinglot-id
          in: header
          description: 주차장 ID
          required: false
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProcessCarViolationDto'
      responses:
        '200':
          description: 위반 기록 처리 (관리자 ↑) 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarViolationDto'
      security:
        - bearer: []
        - bearer: []
      summary: 위반 기록 처리 (관리자 ↑)
      tags:
        - 차량 위반 관리